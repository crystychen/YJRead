<!-- pages/daily_task/daily_task.wxml -->
<!-- height: {{windowHeight}}px -->
<view class='container' style=''>
  <!-- header -->
  <!-- <view class='user-infos'>
    <button class="openbtn" wx:if='{{authLevel != 2}}' open-type="getUserInfo" bindgetuserinfo="onGotUserInfo"></button>
    <image class='header_img' src='{{userInfo && userInfo.avatarUrl? userInfo.avatarUrl:"/images/nologinuser.png"}}'></image>
    <view class='infos-detail'>
      <text class='user-name'>{{userInfo.nickName? userInfo.nickName:"点击头像立即登录" }}</text>
      <view class='row'>
        <image class="sm_icon" src='/images/bookMark_active.png'></image>
        <text class='infos-desc'>已有<text class="num">{{gold}}</text>张书签</text>
      </view>
    </view>
  </view> -->
  <!-- headbcg -->
  <view class="head-bcg"></view>
  <view class="head-wrap">
    <view class="card-wrap sign-wrap">
      <view class="row between">
        <text class="a">我的书签: {{gold}}书签</text>
        <text class="right-cart" style="color: #3772FB" bindtap="toShopMall">去兑换></text>
      </view>
      <view class="sign-list">
        <view class="sign-item" wx:for="{{signInfo}}">
          <view class="img-wrap">
            <image class="img {{item.issign == 1?'active':''}}" src="{{item.issign == 1?'../../images/gou.png':''}}"></image>
            <text class="img-text">{{item.issign == 1?'':item.number}}</text>
          </view>
          <text class="sign-text">{{index+1}}天</text>
        </view>
      </view>
      <text class="sign-tip">已经连续签到{{signDays}}天，明天签到奖励翻倍</text>
      <view class="btn-container" style="position: relative">
        <button class="openbtn" wx:if='{{authLevel != 2}}' data-id="{{book.id}}" open-type="getUserInfo" bindgetuserinfo="onGotUserInfo"></button>
        <view class="btn active sign-btn" wx:if="{{isSigned}}" bindtap="signIn">
          签到领{{isSigned[0].number}}书签
        </view>
        <view class="btn disabled sign-btn" wx:else>已签到</view>
      </view>
    </view>
  </view>
  <view class="wrap" wx:if="{{onceTasks.length}}">
    <view class="card-wrap">
      <block wx:for="{{onceTasks}}" wx:key="index">
        <view class="cell-wrap">
          <view>
            <text class="cell-title">每日听书5分钟</text>
            <text class="cell-num">+4书签</text>
          </view>
          <view class="btn blue-color cell-btn">去书城</view>
        </view>
      </block>
      <!-- <view class="cell-wrap">
        <view>
          <text class="cell-title">每日听书5分钟</text>
          <text class="cell-num">+4书签</text>
        </view>
        <view class="btn blue-color cell-btn">去书城</view>
      </view>
      <view class="cell-wrap">
        <view>
          <text class="cell-title">每日听书5分钟</text>
          <text class="cell-num">+4书签</text>
        </view>
        <view class="btn blue-color cell-btn">去书城</view>
      </view> -->
    </view>
  </view>
  <block wx:for="{{dailyTasks}}" wx:key="index">
    <view class="wrap">
      <view class="card-wrap">
        <view class="cell-wrap">
          <view>
            <text class="cell-title">{{item[2]}}</text>
            <text class="cell-num">+{{item[8]}}书签</text>
          </view>
          <view class="btn blue-color cell-btn" wx:if="{{item[1] == 1}}" bindtap="toRead">去阅读</view>
          <view class="btn blue-color cell-btn" wx:if="{{item[1] == 3}}">邀请</view>
          <view class="btn blue-color cell-btn" wx:if="{{item[1] == 5}}">去书城</view>
        </view>
      </view>
    </view>
  </block>
  <!-- <view class="wrap">
    <view class="card-wrap">
      <view class="cell-wrap">
        <view>
          <text class="cell-title">每日听书5分钟</text>
          <text class="cell-num">+4书签</text>
        </view>
        <view class="btn blue-color cell-btn">去书城</view>
      </view>
    </view>
  </view> -->
</view>
<!-- 好友邀請文章列表 -->
<view class="modal-mask" bindtap="hideInviteList" catchtouchmove="preventTouchMove" wx:if="{{isInviteList}}"></view>
<view class='modal' catchtouchmove="preventTouchMove" wx:if="{{isInviteList}}">
  <scroll-view scroll-y="true" style="overflow: hidden" style="height: 720rpx;" scroll-with-animation="true">
    <view class='view-list'>
      <block wx:for="{{contentList}}" wx:for-index="index" wx:key="index">
        <view class='view-list-item'>
          <view class='item-infos'>
            <image class='' src='{{item[2]}}'></image>
            <text>{{item[1]}}</text>
          </view>
          <view class='btn-wrap' data-shareurl="{{item[8]}}" data-shareArtid="{{item[0]}}" catchtap="showShareBoard">
            <view class='btn blue-color right-btn'>去邀請</view>
            <!-- <button class="share-btn" open-type='share'></button> -->
          </view>
        </view>
      </block>
    </view>
  </scroll-view>
  <view class='btn active w-vertical-align-l more-btn blue-color' bindtap='toRead'>更多精彩文章</view>
</view>
<!-- 签到面板 -->
<signinmodal modal-hidden="{{isSignedModal}}" bindsignIn="signIn" bindgetUserInfo="getUserInfofromCom" modal-msg="{{signInfo}}" sign-days="{{signDays}}" auth-level="{{authLevel}}" is-signed="{{isSigned}}" />
<popup modal-hidden="{{tipsModal}}" modal-title="恭喜" award="{{signAward}}" modal-type="1" is-currentpage="true" bindtoView="toAwardView"></popup>
<!-- 专属海报 -->
<share-poster modal-hidden="{{isPosterModal}}"></share-poster>
<!-- 分享面板 -->
<share-board modal-hidden="{{isShareBoard}}" putshareurl="{{putshareurl}}" putshareartid="{{putshareartid}}" bindshowPosterModal="showPosterModal"></share-board>